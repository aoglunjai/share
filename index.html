<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>iDream</title> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    
  </head>
  <body>

    
    <script>
    window.onload = function(e){
      liff.init({liffId: "1657358462-75PYnRAq"}, function(){   //---แก้ iD line liff login
        liff.ready.then(()=>{
          if(liff.isLoggedIn()){
          var name = getParameterByName("refer")
          //https://liff.line.me/1657262937-WGp6Pxpa?refer=xxx
          
          

            
//แชร์ ด้วยรูปแบบ flex Msg --- https://liff.line.me/1657358462-75PYnRAq?refer=share
            
            if(name === "share"){
              var ss = [{
  "type": "flex",
  "altText": "ทบทวนบุญสถาปนาวัดแม่แพ",   //--แก้คำโชว์ที่เห็นในไลน์พร้อมกับส่งการ์ด
  "contents":

//ลบข้อความด้านล่าง ภายในกรอบ //xxxx// และ copy text Msg มาไว้ด้านล่างนี้//
                
{
  "type": "bubble",
  "hero": {
    "type": "image",
    "url": "https://idream.in.th/wp-content/uploads/2022/09/card-line.png",
    "size": "full",
    "aspectRatio": "20:13",
    "aspectMode": "cover"
  },
  "body": {
    "type": "box",
    "layout": "vertical",
    "contents": [
      {
        "type": "text",
        "text": "ทบทวนบุญสถาปนา "วัดแม่แพ"",
        "weight": "bold",
        "size": "lg",
        "color": "#1231C7FF",
        "contents": []
      },
      {
        "type": "text",
        "text": "วันธรรมชัยที่ 27 สิงหาคม พ.ศ.2565",
        "size": "md",
        "margin": "sm",
        "contents": []
      },
      {
        "type": "text",
        "text": "ณ บ้านแม่แพ อ.สบเมย จ.แม่ฮ่องสอน",
        "margin": "xs",
        "contents": []
      },
      {
        "type": "box",
        "layout": "baseline",
        "margin": "md",
        "contents": [
          {
            "type": "icon",
            "url": "https://scdn.line-apps.com/n/channel_devcenter/img/fx/review_gold_star_28.png",
            "size": "sm"
          },
          {
            "type": "icon",
            "url": "https://scdn.line-apps.com/n/channel_devcenter/img/fx/review_gold_star_28.png",
            "size": "sm"
          },
          {
            "type": "icon",
            "url": "https://scdn.line-apps.com/n/channel_devcenter/img/fx/review_gold_star_28.png",
            "size": "sm"
          },
          {
            "type": "icon",
            "url": "https://scdn.line-apps.com/n/channel_devcenter/img/fx/review_gold_star_28.png",
            "size": "sm"
          },
          {
            "type": "icon",
            "url": "https://scdn.line-apps.com/n/channel_devcenter/img/fx/review_gold_star_28.png",
            "size": "sm"
          }
        ]
      },
      {
        "type": "text",
        "text": "- พิธีทำบุญตักบาตรครั้งแรกในหมู่บ้าน",
        "color": "#666666",
        "margin": "md",
        "contents": []
      },
      {
        "type": "text",
        "text": "- พิธีตอกเสาเข็มมงคลปฐมฤกษ์",
        "color": "#666666",
        "margin": "md",
        "contents": []
      },
      {
        "type": "text",
        "text": "- พิธีวางศิลาฤกษ์ สร้างวัดแม่แพ",
        "color": "#666666",
        "margin": "md",
        "contents": []
      },
      {
        "type": "text",
        "text": "สร้างวัด สร้างเจดีย์ สร้างคนดี : วัดบ้านขุน ❤️",
        "weight": "bold",
        "size": "sm",
        "align": "center",
        "margin": "lg",
        "contents": []
      }
    ]
  },
  "footer": {
    "type": "box",
    "layout": "vertical",
    "flex": 0,
    "spacing": "sm",
    "contents": [
      {
        "type": "button",
        "action": {
          "type": "uri",
          "label": "คลิกรับชม",
          "uri": "https://youtu.be/zn7LDRh36Tc"
        },
        "color": "#1B4FCAFF",
        "height": "md",
        "style": "primary"
      },
      {
        "type": "button",
        "action": {
          "type": "uri",
          "label": "คลิก Share",
          "uri": "https://liff.line.me/1657358462-MwP7we6m?refer=share5"
        },
        "color": "#C3082EFF",
        "height": "md",
        "style": "primary"
      },
      {
        "type": "spacer",
        "size": "sm"
      }
    ]
  }
}
// End Flex Msg //

              }]
              
              shareMsg(ss)
            }
 
//------------------------------------------//               
            

           
//ด้านล่างนี้ห้ามแก้ไขใดใด           
            
          } else {
            liff.login()
          }
          
        })
        
      })
    }
      
      function sendMsg(flex){
        liff.sendMessages(flex).then(function(){
          liff.closeWindow();
        })
      }
      
      function shareMsg(flex){
        liff.shareTargetPicker(flex).then(function (res) {
      if (res) {
        liff.closeWindow();
             } else {
        const [majorVer, minorVer] = (liff.getLineVersion() || "").split('.');
        if (parseInt(majorVer) == 10 && parseInt(minorVer) < 11) {
          
          console.log('TargetPicker was opened at least. Whether succeeded to send message is unclear')
        } else {
         
          console.log('TargetPicker was closed!')
        }
      }
    }).catch(function (error) {
     
      console.log('something wrong happen')
    })

        
      }
      
      function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}
      
    </script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
  </body>
</html>

